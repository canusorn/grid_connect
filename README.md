# grid_connect
 
# โปรเจคเทียบสัญญาณ sine wave
- โดยอ่านค่าความถี่สัญญาณ sine wave จาก 2 แหล่ง เพื่อ simulate การเชื่อมกริดเข้าด้วยกัน
- คำนวณค่า Vrms Frequency และ Phase Shift 
- โดยใช้บอร์ด Arduino UNO และ สัญญาณเข้าที่ A0 A1
- สัญญาณต้องอยู่ระหว่าง 0-5V โดยจากเซนเซอร์หรือการต่อกราว์ที่ 2.5v จากการแบ่งดันโดยใช้ R 10k 2 ตัวอนุกรมกันก็ได้

## # การทำงาน
1. ตั้งค่า interupt 1kHz หรือ 1ms
ทุก1ms ให้อ่านค่าจาก ADC แล้ว ที่ฟังก์ชั่น ISR(TIMER1_COMPA_vect)
 1. ถ้าสัญญาณตัดที่ค่ากลาง (เช่น +2.5 ถึง -2.5 ค่ากลางคือ 0) ให้จับเวลา
 2. เมื่อตัดครบ6ครั้ง(0-5) ซึ่งเป็น 2 ความยาวคลื่น ให้คำนวณความถี่จากระยะเวลา 2λ และรวมค่าไว้ เพื่อคำนวณค่าเฉลี่ยต่อไป
 3. เวลาเริ่มต้นสัญญาณและสิ้นสุดสัญญาณ ทั้ง2สัญญาณสามารถนำมาคำนวณความต่างเฟสจากเวลาที่ต่างกันได้ โดยใช้ความถี่1 เป็นตัวอ้างอิงความต่างเฟส และรวมค่าไว้ เพื่อคำนวณค่าเฉลี่ยต่อไป
2. เมื่อค่า analogSample >= 250ค่า (ค่าเริ่มต้น)  (1analogSample ได้ทุก 1ms ดังนั้น 250analogSample คือ 250ms  กรณ๊ 50Hz(20ms) จะได้ประมาณ 7λ) ก็จะนำค่าจาก ii และ iii มาคำนวณค่าเฉลี่ย และแสดงผ่านหน้า serial monitor
 1. ถ้าความถี่ตำกว่า 30Hz ให้เปลี่ยนค่า sample จาก 250 เป้น 1000 เพื่อให้ครอบคลุมความยาวคลื่นที่มากขึ้น